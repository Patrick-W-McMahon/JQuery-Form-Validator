!function(t,e,r,n){function i(e,r){return p=this,this.element=e,this.options=t.extend({},f,r),this._name=h,this.errorMessages=[],this.modules=[],this.addModule=function(t){p.modules.push(t)},this.err=function(t,e,r){p.errorMessages.push({title:e,msg:r,field:t})},this.getErrors=function(){return p.errorMessages||[]},this.init(),this}function o(t,e,r){for(var n=[],i=0;i<t.length;i++)n.push(r.attr(e+t[i]));return n}function s(t,e){for(var r=0;r<t.length;r++)if(d(t[r]))return t[r];return e}function a(t){var e=t.parent().find("label[for="+t.attr("id")+"]");if(d(e)&&d(e.html()))return e.html();var r=t.attr("data-err-title");return r.length>0?r:void 0}function l(t){return t.attr("data-err-msg")||"value required"}function u(t){p.options.onReset.call(p),p.errorMessages=[],p.options.errorDisplayElm.empty(),p.options.errorDisplayElm.hide()}function c(e){var r=t(p.element);p.errorMessages=[],r.find("input:invalid").each(function(e,r){p.err(t(this),a(t(this)),l(t(this)))});for(var n=0;n<p.modules.length;n++)p.modules[n](p,r);p.options.onValidate.call(p),p.errorMessages.length>0?(p.options.onDisplayErrors.call(p),e.preventDefault(),p.options.onErrorsFound.call(p)):p.options.onSubmit.call(p,e)}function d(t){return"undefined"!=typeof t}var p,h="validate",f={error_display_id:"",errorDisplayElm:"",onValidate:function(){},onErrorsFound:function(){},onDisplayErrors:function(){var e=this.options.errorDisplayElm;if(d(e)){var r=this.getErrors();e.empty();for(var n=0;n<r.length;n++)e.append(t("<div><span class='title'>"+r[n].title+"</span>: "+r[n].msg+"</div>")).show()}else console.log("error display element not set")},onReset:function(){},onSubmit:function(){}};t.fn[h]=function(e){return this.each(function(){t.data(this,"plugin_"+h)||t.data(this,"plugin_"+h,new i(this,e))})},i.prototype.init=function(){var e=t(this.element);this.options.errorDisplayElm=s([t(e.attr("error_diplay")),t(e.attr("errorDiplay")),t(e.attr("error-diplay"))],t(this.options.error_display_id)),e.submit(function(t){c(t)}),e.find("input[type=submit]").on("click",function(t){c(t)}),e.find("input[type=reset]").on("click",function(t){u(t)}),this.addModule(function(e,r){r.find("[data-validate]").each(function(){var e=t(this);switch(e.attr("data-validate").toLowerCase()){case"checkboxgroup":case"checkbox_group":case"checkbox-group":var r=e.find("input[type=checkbox]:checked").length,n=e.attr("data-min-select")||!1,i=e.attr("data-max-select")||!1,l=["-select-err","_select_err","SelectErr"];n&&n>r&&p.err(e,a(e),s(o(l,"min",e),"min of "+n+" selections must be made")),i&&r>i&&p.err(e,a(e),s(o(l,"max",e),"max of "+i+" selections can be made"))}})})}}(jQuery,window,document);
